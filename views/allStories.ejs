<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All snapshots</title>
    <link rel="stylesheet" href="/stylesheets/tailwind.css">
</head>
<body>
    <header class="flex flex-row bg-black justify-between items-center font-body ">
        <section class="logo-section w-30 px-3 py-1">
            <div class="">
                <img class="w-3/12" src="/images/logo.png" alt="snapshot logo">
            </div>
        </section>
        <section class="nav">
            <nav>
                <ul class="text-white items-center flex flex-row justify-between text-1xl">
                    <li class="mx-4"><a href="/">Home</a></li>
                    <li class="mx-4 bg-white text-black p-1 "><a href="/stories">Stories</a></li>
                    <% if(loginOption == 'login'){  %>
                        <li class="mx-4"><a href="/user/<%= loginOption %>"><%= loginOption %></a></li>
                        <li class="mx-4"><a href="/user/register">Register</a></li>

                  <%  }else{  %>
                        <li class="mx-4"><a href="/<%= loginOption %>"><%= loginOption %></a></li>
                        <li class="mx-4"><a href="/logout">LogOut</a></li>
                   <% } %>
                    
                    
                </ul>
            </nav>
        </section>
    </header>
    <main class="font-body">
     <article>
        <section class="text-center my-5 ">
            <h2 class="text-3xl font-bold">Explore many snapshots from different users</h2>
        </section>
        <section class=" mx-10 grid grid-cols-3 gap-4">
            <%  if(stories == ' '){   %>
                <h2 class="text-3xl text-center text-red-700  font-bold " >No stories yet,add a new story now</h2>
          <%  }else{ %>
            <%   stories.forEach((story) => {  %>
                <section class="flex bg-white shadow-2xl rounded-lg mb-6 tracking-wide flex-col ">
                    <div class=" flex-1 image-sec md:flex-shrink-0">
                        <img class="w-full h-auto rounded-lg rounded-b-none" src="/images/upload/<%= story.snapshot %>" alt="snapshot image">
                    </div>
                    <div class="flex-initial px-4 py-2">
                        <h2 class="title-class font-bold text-2xl text-red-600 py-2"><%= story.title %></h2>
                        <p class="story-description font-normal py-2 truncate"><%= story.description.substring(0,80) %></p>
                        <div class="options">
                            <a href="/stories/<%= story.id %>" class="underline text-blue-600">Read More</a>
                            
                        </div>
                        <div class="author-details my-2 flex flex-row">
                            <div class="">
                                <img class="w-12 h-12 mx-4 object-cover rounded-full " src = "/images/upload/<%= story.author.profilePic %>" alt="user profile pic">
                            </div>
                            <div class="author-name-time">
                                <h2><%= story.author.name %></h2>
                                <small><%= story.createdAt %></small>
                            </div>
                        </div>
                    </div>
                  </section>
            <%   }) %>
           <% }  %>
        </section>


     </article>
    </main>
</body>
</html>